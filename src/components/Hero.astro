---
import { type Language, type TranslationObject } from '../utils/i18n';

interface Props {
  lang: Language;
  t: TranslationObject;
}

const { lang, t } = Astro.props;
---

<section id="home" class="hero">
  <div class="container hero-content">
    <div class="hero-badge">
      {t.hero.badge}
    </div>
    
    <h1>{t.hero.title}</h1>
    <p>{t.hero.subtitle}</p>
    
    <div class="hero-cta">
      <div id="calendar-button-container">
        <!-- Google Calendar button will be injected here -->
      </div>
    </div>
    
    <div class="hero-stats">
      <div class="stat-card">
        <span class="stat-number">{t.hero.stats.founded.number}</span>
        <span class="stat-label">{t.hero.stats.founded.label}</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">{t.hero.stats.experience.number}</span>
        <span class="stat-label">{t.hero.stats.experience.label}</span>
      </div>
      <div class="stat-card">
        <span class="stat-number">{t.hero.stats.packages.number}</span>
        <span class="stat-label">{t.hero.stats.packages.label}</span>
      </div>
    </div>
  </div>
</section>

<style>
  #calendar-button-container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 50px;
  }
  
  /* Override Google Calendar button styles to match our design */
  :global(.SOqnTe) {
    font-size: 1.1rem !important;
    padding: 0.875rem 2rem !important;
    border-radius: 8px !important;
    font-weight: 600 !important;
    text-transform: none !important;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1) !important;
    transition: all 0.3s ease !important;
  }
  
  :global(.SOqnTe:hover) {
    transform: translateY(-2px) !important;
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15) !important;
  }
  
  /* RTL support for Arabic */
  html[dir="rtl"] #calendar-button-container {
    direction: rtl;
  }
</style>

<!-- Google Calendar Appointment Scheduling -->
<link href="https://calendar.google.com/calendar/scheduling-button-script.css" rel="stylesheet">
<script src="https://calendar.google.com/calendar/scheduling-button-script.js" async></script>
<script>
  const lang = document.documentElement.lang;
  const buttonLabel = lang === 'ar' ? 'احجز استشارة مجانية' : 'Schedule Free Consultation';
  
  window.addEventListener('load', function() {
    const container = document.getElementById('calendar-button-container');
    if (container && window.calendar && window.calendar.schedulingButton) {
      // Create a script element as target
      const scriptTarget = document.createElement('script');
      container.appendChild(scriptTarget);
      
      calendar.schedulingButton.load({
        url: 'https://calendar.google.com/calendar/appointments/schedules/AcZssZ2dEkUfuxOfgFcfw1Moc5I_rOIl0u3zLY9USobvBbKJKQdJEiqtBiNH-zHjON-wy2RsPK4WUSSN?gv=true',
        color: '#039BE5',
        label: buttonLabel,
        target: scriptTarget,
      });
    }
  });
</script>